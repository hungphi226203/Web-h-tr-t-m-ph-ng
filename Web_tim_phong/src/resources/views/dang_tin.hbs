<div class="post-container">
  <form action="/dang-tin" method="post" class="dang-tin" id="mainForm" enctype="multipart/form-data" style=" border: 2px solid rgb(21, 179, 247);border-radius:15px"
    style="background-color:rgb(255, 255, 255) ;border-radius: 15px;">
    <h1 style="text-align: center;">Biểu mẫu thông tin phòng</h1>
    <div class="them-anh">
      <h2>Thêm ảnh minh họa</h2>
      <input type="file" id="fileupload" name="fileupload" accept="image/*" multiple />
    </div>

    <div class="title">
      <h2>Tiêu đề</h2>
      <textarea class="form-control" name="title" rows="3" placeholder="Ví dụ: Cho thuê phòng trọ gần trường HVCNBCVT"
        required></textarea>
    </div>

    <div class="dia-chi">
      <h2>Thông tin</h2>
      <button id="btndiachi" type="button" class="btn btn-outline-dark" style="width:200px">Địa chỉ</button>
      <div id="popupForm" class="popup">
        <div class="popup-content form-control">
          <span class="closeBtn">×</span>
          <h2 class="diachi-popup">Địa chỉ</h2>
          <input class="form-control" type="text" id="sonha" name="addres" placeholder="Số nhà" required />
          <input class="form-control" type="text" id="tenduong" name="tenduong" required placeholder="Tên đường" />
          <input class="form-control" type="text" id="quan" name="quan" required placeholder="Quận" />
          <input class="form-control" type="text" id="thanhpho" name="thanhpho" required placeholder="Thành phố" />
          <input class="form-control" type="text" id="tinh" name="tinh" required placeholder="Tỉnh" />
        </div>
      </div>
    </div>

    <div class="gia">
      <input class="form-control" name="area" placeholder="Diện tích sử dụng (m2)" style="width:60%" required />
      <input class="form-control" name="price" placeholder="Giá thuê (VND)" style="margin-bottom:10px;width:60%"
        required />
    </div>

    <div class="mo-ta">
      <h2>Mô tả</h2>
      <textarea class="form-control" name="description" rows="5" placeholder="Nội dung mô tả" required></textarea>
    </div>
    <div style="text-align:center;">
      <button class="btn btn-outline-danger" id="submitButton" type="submit" style="margin-top:20px;">Đăng</button>
    </div>

  </form>
  <div class="nut-div" style="height: 400px; position: sticky; top: 20px; border: 2px solid rgb(21, 179, 247);">
  <div style="position: sticky; top: 50px;">
    <div style="padding-left:50px;padding-top:30px">
      <div style="display: flex; justify-content: center;margin-left:-50px;">
        <div style="display:flex">
          <img src="https://i.pinimg.com/736x/21/91/6e/21916e491ef0d796398f5724c313bbe7.jpg"
            style="width:40px;border-radius:25px">
          <a class="card-text"
            style="margin:auto;margin-left:10px;text-decoration:none;color:rgb(65, 65, 65)">{{{user}}}</a>
        </div>
      </div>

      <ul style="padding-top: 20px; list-style-type: none;">
        <li style="margin-left: -10px;  position: relative;">
          <a href="/thong-tin/{{user}}">
            <button type="button" class="btn btn-outline-primary" style="margin: 0;">
              <svg style="margin-bottom: 3px;" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
                <path
                  d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10s-3.516.68-4.168 1.332c-.678.678-.83 1.418-.832 1.664z" />
              </svg>
              Thông tin cá nhân
            </button>
            <hr style="border: none; border-top: 2px dotted black;width:250px;margin-left:-40px" />
          </a>
          <hr style="border-top: 1px dotted #ccc; margin: 0; position: absolute; left: 0; right: 0;">
        </li>
        <li style="margin-left: 20px; padding-bottom: 10px; position: relative;">
          <a href="/dang-tin">
            <button type="button" class="btn btn-outline-primary" style="margin: 0;">
              <svg style="margin-bottom: 4px;" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                fill="currentColor" class="ionicon" viewBox="0 0 512 512">
                <path d="M384 224v184a40 40 0 01-40 40H104a40 40 0 01-40-40V168a40 40 0 0140-40h167.48" fill="none"
                  stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" />
                <path
                  d="M459.94 53.25a16.06 16.06 0 00-23.22-.56L424.35 65a8 8 0 000 11.31l11.34 11.32a8 8 0 0011.34 0l12.06-12c6.1-6.09 6.67-16.01.85-22.38zM399.34 90L218.82 270.2a9 9 0 00-2.31 3.93L208.16 299a3.91 3.91 0 004.86 4.86l24.85-8.35a9 9 0 003.93-2.31L422 112.66a9 9 0 000-12.66l-9.95-10a9 9 0 00-12.71 0z" />
              </svg>
              Đăng tin
            </button>
          </a>
          <hr style="border-top: 1px dotted #ccc; margin: 0; position: absolute; left: 0; right: 0;">
        </li>
        <li style="margin-left: 13px;  position: relative;">
          <a href="/quan-ly-tin">
            <button type="button" class="btn btn-outline-primary" style="margin: 0;">
              <svg style="margin-bottom: 3px;" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                fill="currentColor" class="ionicon" viewBox="0 0 512 512">
                <rect x="96" y="48" width="320" height="416" rx="48" ry="48" fill="none" stroke="currentColor"
                  stroke-linejoin="round" stroke-width="32" />
                <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"
                  d="M176 128h160M176 208h160M176 288h80" />
              </svg>
              Quản lý tin
            </button>
            <hr style="border: none; border-top: 2px dotted black;width:250px;margin-left:-63px" />

          </a>
          <hr style="border-top: 1px dotted #ccc; margin: 0; position: absolute; left: 0; right: 0;">
        </li>
        <li style="margin-left: 25px; padding-bottom: 10px; position: relative;">
          <a href="/logout">
            <button type="button" class="btn btn-outline-danger" style="margin: 0;">Đăng xuất</button>
            <hr style="border: none; border-top: 2px dotted black;width:250px;margin-left:-75px" />
          </a>
        </li>
      </ul>
    </div>
  </div>
</div>


</div>



<script>

  // Get the modal
  var popupForm = document.getElementById("popupForm");

  // Get the button that opens the modal
  var openFormBtn = document.getElementById("btndiachi");

  // Get the <span> element that closes the modal
  var closeBtn = document.getElementsByClassName("closeBtn")[0];

  // Get the form element
  var addressForm = document.getElementById("mainForm");

  // Get the submit button
  var submitButton = document.getElementById("submitButton");

  // When the user clicks the button, open the modal 
  openFormBtn.onclick = function () {
    popupForm.style.display = "block";
  }

  // When the user clicks on <span> (x), close the modal
  closeBtn.onclick = function () {
    popupForm.style.display = "none";
  }

  // When the user clicks anywhere outside of the modal, close it
  window.onclick = function (event) {
    if (event.target == popupForm) {
      popupForm.style.display = "none";
    }
  }

  // Handle form validation and custom validation messages
  submitButton.onclick = function (event) {
    // Prevent default button behavior
    //event.preventDefault();

    // Custom validation logic
    var valid = true;
    var elements = addressForm.elements;

    for (var i = 0; i < elements.length; i++) {
      if (elements[i].hasAttribute('required') && !elements[i].value) {
        valid = false;
        elements[i].classList.add('invalid');
        elements[i].setCustomValidity("Vui lòng điền vào trường này");
        elements[i].reportValidity();
      } else {
        elements[i].classList.remove('invalid');
        elements[i].setCustomValidity(""); // Clear the custom validation message
      }
    }

    if (valid) {
      // If the form is valid, you can process the data here
      alert("Form submitted successfully!");
      addressForm.submit(); // Susbmit the form manually
    } else {
      alert("Bạn chưa điền đầy đủ thông tin!");
    }
  };


</script>